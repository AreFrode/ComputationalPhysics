<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Computational Physics:  Teach yourself C++">

<title>Computational Physics:  Teach yourself C++</title>

<!-- Bootstrap style: bootstrap -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">

/* Add scrollbar to dropdown menus in bootstrap navigation bar */
.dropdown-menu {
   height: auto;
   max-height: 400px;
   overflow-x: hidden;
}

/* Adds an invisible element before each target to offset for the navigation
   bar */
.anchor::before {
  content:"";
  display:block;
  height:50px;      /* fixed header height for style bootstrap */
  margin:-50px 0 0; /* negative fixed header height */
}
</style>


</head>

<!-- tocinfo
{'highest level': 2,
 'sections': [('Getting Started, compiling and linking first',
               2,
               None,
               '___sec0'),
              ('Brief summary', 2, None, '___sec1'),
              ('From decimal to binary representation', 3, None, '___sec2'),
              ('Technical Matter in C/C++: Pointers', 2, None, '___sec3'),
              ('Using _strings_ instead of characters', 2, None, '___sec4'),
              ('Matrices in C++', 2, None, '___sec5'),
              ('"How to use the Library functions":"https://github.com/CompPhysics/ComputationalPhysicsMSU/tree/master/doc/Programs/LecturePrograms/programs/cppLibrary"',
               2,
               None,
               '___sec6'),
              ('"Using Armadillo to perform an LU decomposition":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/CppQtCodesLectures/MatrixTest/main.cpp"',
               2,
               None,
               '___sec7'),
              ('Optimization and profiling', 2, None, '___sec8'),
              ('Vectorization and the basic idea behind parallel computing',
               2,
               None,
               '___sec9'),
              ('What is vectorization?', 2, None, '___sec10'),
              ('"A simple test case with and without vectorization":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp"',
               2,
               None,
               '___sec11'),
              ('Measuring performance', 2, None, '___sec12'),
              ('Problems with measuring time', 2, None, '___sec13'),
              ('Problems with cold start', 2, None, '___sec14'),
              ('Problems with smart compilers', 2, None, '___sec15'),
              ('Problems with interference', 2, None, '___sec16'),
              ('Problems with measuring performance', 2, None, '___sec17'),
              ('Thomas algorithm for tridiagonal linear algebra equations',
               2,
               None,
               '___sec18'),
              ('"The specialized Thomas algorithm (Project 1)":"https://github.com/CompPhysics/ComputationalPhysics/blob/master/doc/Projects/2016/Project1/Examples/TridiagonalTiming.cpp"',
               2,
               None,
               '___sec19'),
              ('"Example: Transpose of a matrix":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program8.cpp"',
               2,
               None,
               '___sec20'),
              ('"Matrix-matrix multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program9.cpp"',
               2,
               None,
               '___sec21'),
              ('How do we define speedup? Simplest form',
               2,
               None,
               '___sec22')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="learningcpp-bs.html">Computational Physics:  Teach yourself C++</a>
  </div>

  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="#___sec0" style="font-size: 80%;"><b>Getting Started, compiling and linking first</b></a></li>
     <!-- navigation toc: --> <li><a href="#___sec1" style="font-size: 80%;"><b>Brief summary</b></a></li>
     <!-- navigation toc: --> <li><a href="#___sec2" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;From decimal to binary representation</a></li>
     <!-- navigation toc: --> <li><a href="#___sec3" style="font-size: 80%;"><b>Technical Matter in C/C++: Pointers</b></a></li>
     <!-- navigation toc: --> <li><a href="#___sec4" style="font-size: 80%;"><b>Using <b>strings</b> instead of characters</b></a></li>
     <!-- navigation toc: --> <li><a href="#___sec5" style="font-size: 80%;"><b>Matrices in C++</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec6" style="font-size: 80%;"><b>"How to use the Library functions":"https://github.com/CompPhysics/ComputationalPhysicsMSU/tree/master/doc/Programs/LecturePrograms/programs/cppLibrary"</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec7" style="font-size: 80%;"><b>"Using Armadillo to perform an LU decomposition":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/CppQtCodesLectures/MatrixTest/main.cpp"</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec8" style="font-size: 80%;"><b>Optimization and profiling</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec9" style="font-size: 80%;"><b>Vectorization and the basic idea behind parallel computing</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec10" style="font-size: 80%;"><b>What is vectorization?</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec11" style="font-size: 80%;"><b>"A simple test case with and without vectorization":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp"</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec12" style="font-size: 80%;"><b>Measuring performance</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec13" style="font-size: 80%;"><b>Problems with measuring time</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec14" style="font-size: 80%;"><b>Problems with cold start</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec15" style="font-size: 80%;"><b>Problems with smart compilers</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec16" style="font-size: 80%;"><b>Problems with interference</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec17" style="font-size: 80%;"><b>Problems with measuring performance</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec18" style="font-size: 80%;"><b>Thomas algorithm for tridiagonal linear algebra equations</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec19" style="font-size: 80%;"><b>"The specialized Thomas algorithm (Project 1)":"https://github.com/CompPhysics/ComputationalPhysics/blob/master/doc/Projects/2016/Project1/Examples/TridiagonalTiming.cpp"</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec20" style="font-size: 80%;"><b>"Example: Transpose of a matrix":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program8.cpp"</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec21" style="font-size: 80%;"><b>"Matrix-matrix multiplication":"https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program9.cpp"</b></a></li>
     <!-- navigation toc: --> <li><a href="._learningcpp-bs001.html#___sec22" style="font-size: 80%;"><b>How do we define speedup? Simplest form</b></a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0000"></a>
<!-- ------------------- main content ---------------------- -->



<div class="jumbotron">
<center><h1>Computational Physics:  Teach yourself C++</h1></center>  <!-- document title -->

<p>
<!-- author(s): Morten Hjorth-Jensen -->

<center>
<b>Morten Hjorth-Jensen</b> [1, 2]
</center>

<p>
<!-- institution(s) -->

<center>[1] <b>Department of Physics, University of Oslo</b></center>
<center>[2] <b>Department of Physics and Astronomy and National Superconducting Cyclotron Laboratory, Michigan State University</b></center>
<br>
<p>
<center><h4>Sep 8, 2017</h4></center> <!-- date -->
<br>
<p>
</div> <!-- end jumbotron -->

<h2 id="___sec0" class="anchor">Getting Started, compiling and linking first </h2>

<p>
The programming language C++ is a so-called <a href="https://en.wikipedia.org/wiki/Compiled_language" target="_self">compiled language</a>. For help on how to use C++, we recommend highly the <a href="http://www.cplusplus.com/" target="_self">cpplus website</a>.

<p>
Assume we already have a program file, say <b>myprogram.cpp</b>. Note that C++ files have the extension <b>.cpp</b>.

<p>
Here we discuss first how to obtain an executable without using IDEs like <a href="https://www.qt.io/" target="_self">QT</a> creator or other types of integrated development environments (<a href="https://www.visualstudio.com/" target="_self">Visual Studio</a> or other, see <a href="https://sourceforge.net/directory/development/ide/" target="_self">list</a> etc).

<p>
It means that you need to compile the program (translate the human-like instructions into machine code) and link the resulting compiled file (a so-called <b>object</b> file) with the various libraries in order to obtain an executable file.

<p>
In order to obtain an executable file for a C++ program, the following
instructions under Unix/Linux can be used (<a href="https://msdn.microsoft.com/en-us/library/ms235639.aspx" target="_self">similar instructions apply to windows-like environments using DOS</a>).

<p>
First you need to open a terminal on your Unix/Linux PC/laptop. You need also to have a C++ compiler installed. To check on Unix/Linux whether a c++ is installed or not type simply (in the terminal window)
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>which c++
</pre></div>
<p>
If you get something like 
<p>

<!-- code=text typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Mortens-MacBook-Pro:~ hjensen$ which c++
/usr/bin/c++
</pre></div>
<p>
you are ok. 
Then compile and link your program as
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>c++ -c -Wall myprogram.cpp
c++ -o myprogram.exe  myprogram.o
</pre></div>
<p>
where the compiler is called through the command c++/g++. The compiler
option -Wall means that a warning is issued in case of non-standard
language. The executable file is in this case <b>myprogram.exe</b>. The option
<code>-c</code> is for compilation only, where the program is translated into machine code,
while the <code>-o</code> option links the produced object file <b>myprogram.o</b> with other libraries 
and produces the executable <b>myprogram.exe</b>.

<p>
You can skip the first step by simply writing
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>c++ -o myprogram.exe  myprogram.cpp
</pre></div>
<p>
Also, to speed up the code use compile options like (compiler flags will be dealt with later)

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>c++ -O3 -c -Wall myprogram.cpp
</pre></div>
<p>
To run your program, simply write 
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>myprogram.exe
</pre></div>
<p>
or if you wish to avoid creating executables which by accident have the same name as operating system commands (with sometime fatal consequences) write
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>./myprogram.exe
</pre></div>
<p>
Here, using . denotes the current directory. Since you want to run a file in your current directory and that directory is not in your $PATH, you need the ./ bit to tell the shell where the executable is.

<p>
Under Linux/Unix it is often convenient to create a
so-called makefile, which is a script which includes possible
compiling commands.  By clicking on the link here you can see examples of <a href="https://www.gnu.org/software/make/manual/make.html" target="_self">makefiles</a>.

<p>
If you name your file for <b>makefile</b>, simply type the command
<b>make</b> and Linux/Unix executes all possible statements included in your makefile.

<p>
When you use an IDE like Qt, it creates automatically something similar to a makefile for you and you don't need to hardcode the above statements.

<p>
Our first program is the classic <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/hellow.cpp" target="_self">Hello World</a>.

<p>
Here we present the C++ version using <b>namespace</b>, see shortly below here for an explanation.
<p>

<!-- code=c++ (!bc cpppro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic">// A comment line begins like this in C++ programs</span>
<span style="color: #408080; font-style: italic">// Standard ANSI-C++ include files</span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cstdlib&gt; // atof function </span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;   // input and output</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;      // math functions</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span> (<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
{
  <span style="color: #408080; font-style: italic">// convert the text argv[1] to double using atof:</span>
  <span style="color: #B00040">double</span> r <span style="color: #666666">=</span> atof(argv[<span style="color: #666666">1</span>]);  <span style="color: #408080; font-style: italic">// convert the text argv[1] to double</span>
  <span style="color: #B00040">double</span> s <span style="color: #666666">=</span> sin(r);
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Hello, World! sin(&quot;</span> <span style="color: #666666">&lt;&lt;</span> r <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> s <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;           <span style="color: #408080; font-style: italic">// success execution of the program </span>
}
</pre></div>
<p>
The compiler must see a declaration of a function before you can
call it (the compiler checks the argument and return types).
The declaration of library functions appears
in so-called &quot;header files&quot; that must be included in the program, as an example the following statement includes the so-called <b>Standard Library Functions</b>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cstdlib&gt; // atof function </span><span style="color: #BC7A00"></span>
</pre></div>
<p>
We call three functions (atof, sin, cout)
and these are declared in three different header files. These declarations should come first. The <b>cout</b> function is included in the <b>isostream</b>. In C++, input and output (I/O) operations  are performed by using so-called streams which a <em>stream of data</em> where a  stream is an object with properties that are defined by a class. Global objects are predefined for the standard I/O channels.   The <b>sin</b> function is defined by the <b>cmath</b> library and its header file and needs to be included. For those of you familiar with <b>Python</b> this is similar to 
<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> sin
</pre></div>
<p>
<a href="http://en.cppreference.com/w/cpp/language/return" target="_self">The main program is a function called main</a>
with a return value set to an integer, int (0 if success).
The operating system stores the return value,
and other programs/utilities can check whether
the execution was successful or not. The main program has thus to be declared as <b>int main()</b> in standard C++. 
The command-line arguments are transferred to the main function through

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #B00040">int</span> main (<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
</pre></div>
<p>
The command-line arguments are transferred to the main function through

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #B00040">int</span> main (<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
</pre></div>
<p>
The integer <b>argc</b> is the number  of command-line arguments (two in our case) while
<b>argv</b> is a vector of strings containing the command-line arguments
with _argv[0]_ containing  the name of the program
and _argv[1]_, _argv[2]_, ... are the command-line args, i.e., the number of
arguments that are  inputs to the program.

<p>
We define floating point variables, see also below,
through the keywords <b>float</b> for single precision real numbers and
<b>double</b> for double precision real numbers. The function
<b>atof</b> transforms a text string to a float, either single or double precision.
The <b>sine</b> function is declared in <b>cmath</b>, a library which
is not automatically included and needs to be linked when computing
and producing the  executable file. Note that arrays in C++ begin by default with \( 0 \). The first element is here _argv[0]_.

<p>
A one-dimensional array like <b>argv</b> can be defined statically or dynamically. To reserve space in memory statically means defining a variable of this type as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">char</span> argv[<span style="color: #666666">10</span>]; 
</pre></div>
<p>
which contains in this case ten elements. Each element has a specific address in memory, see the discussions below on pointers. We anticipate partly the discussion here by declaring a pointer variable and allocating memory dynamically. In C++ this is done as

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">char</span> <span style="color: #666666">*</span>argv;  <span style="color: #408080; font-style: italic">// declaring first a pointer</span>
argv <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">char</span>[<span style="color: #666666">10</span>];   <span style="color: #408080; font-style: italic">// Now reserving space for  ten elements in memory for a character variable (4 bytes or 32 bits).</span>
</pre></div>
<p>
For a floating point variable of  8 bytes or 64 bits we would declare a similar array as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">double</span> <span style="color: #666666">*</span>argv;  <span style="color: #408080; font-style: italic">// declaring first a pointer</span>
argv <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[<span style="color: #666666">10</span>];   <span style="color: #408080; font-style: italic">// Now reserving space for  ten elements in memory for a character variable (4 bytes or 32 bits).</span>
</pre></div>
<p>
In similar ways we can declare integer variable, single precisions floats etc.
We can write the above in one line as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">double</span> <span style="color: #666666">*</span>argv <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[<span style="color: #666666">10</span>];   
</pre></div>
<p>
After having compiled this program as 
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>c++ -o hw.exe hellowd.cpp
</pre></div>
<p>
we can run the executable and obtain
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Mortens-MacBook-Pro:cpp hjensen$ ./hw.exe 0.5
Hello, World! sin(0.5) =0.479426
</pre></div>
<p>
If we do not write the value of \( x \) on the command line we would get
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Mortens-MacBook-Pro:cpp hjensen$ ./hw.exe 
Segmentation fault: 11
</pre></div>
<p>
In this case, since reading from the command line with a number of arguments defined by the number of elements in the array _argv[]_, trying to access _argv[1]_ results in a segmentation fault. In the last case there is only one command line argument, the name of the executable program. It means that we have only the array element _argv[0]_. The element _argv[1]_ is not defined and we are trying to access something which is outside the memory slots reserved for _argv[]_.

<p>
We can rewrite our <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/hellownonamespace.cpp" target="_self">Hello World without the namespace usage</a>.

<p>
Namespaces provide a method for preventing name conflicts in large projects and 
symbols declared inside a namespace block are placed in a named scope that prevents them from being mistaken for identically-named symbols in other scopes.
Multiple namespace blocks with the same name are allowed. All declarations within those blocks are declared in the named scope.  This author likes to limit the usage of namespace to some few libraries, like the standard C library <b>csdtlib</b>.

<p>
Here we present the C++ version without using namespace. 
<p>

<!-- code=c++ (!bc cpppro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #408080; font-style: italic">// A comment line begins like this in C++ programs</span>
<span style="color: #408080; font-style: italic">// Standard ANSI-C++ include files</span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cstdlib&gt; // atof function </span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;   // input and output</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;      // math functions</span><span style="color: #BC7A00"></span>

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span> (<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
{
  <span style="color: #408080; font-style: italic">// convert the text argv[1] to double using atof:</span>
  <span style="color: #B00040">double</span> r <span style="color: #666666">=</span> atof(argv[<span style="color: #666666">1</span>]);  <span style="color: #408080; font-style: italic">// convert the text argv[1] to double</span>
  <span style="color: #B00040">double</span> s <span style="color: #666666">=</span> sin(r);
  <span style="color: #408080; font-style: italic">// Note std::cout and std::endl</span>
  std<span style="color: #666666">::</span>cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Hello, World! sin(&quot;</span> <span style="color: #666666">&lt;&lt;</span> r <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> s <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;           <span style="color: #408080; font-style: italic">// success execution of the program </span>
}
</pre></div>
<p>
I personally tend to use <b>namespace</b> for input and output as I feel it increases the readability of my codes. Thus, all examples from here and on will have a statement like

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
</pre></div>

<h2 id="___sec1" class="anchor">Brief summary </h2>

<ul>
  <li> A C/C++ program begins with include statements of header files (libraries,intrinsic functions etc). This is similar to the <b>import</b> statement in Python.</li>
  <li> Functions which are used are normally defined at the top (details below)</li>
  <li> The main program is declared as an integer, it returns 0 (everything correct) or 1 (something went wrong)</li>
  <li> Standard <code>if</code>, <code>while</code> and <code>for</code> statements as in Java, Fortran, Python...</li>
  <li> A C/C++ array begins by indexing at 0!</li>
  <li> Array allocations are done by size, not by the final index value.If you allocate an array with 10 elements, you should index them from \( 0,1,\dots, 9 \).</li>
  <li> Initialize always an array before a computation.</li>
</ul>

<h3 id="___sec2" class="anchor">From decimal to binary representation </h3>

Let us now write a program which translates an integer in the decimal representation to one in the binary representation. The mathematical formula for this is given by
$$
  a_n2^n+a_{n-1}2^{n-1}  +a_{n-2}2^{n-2}  +\dots +a_{0}2^{0}.
$$

<p>
In binary notation we have thus \( (417)_{10} =(110110001)_2 \)
since we have

$$
\begin{align*}
(110100001)_2
&=1\times2^8+1\times 2^{7}+0\times 2^{6}+1\times 2^{5}+0\times 2^{4}+0\times 2^{3}\\
&+0\times 2^{2}+0\times 2^{2}+0\times 2^{1}+1\times 2^{0}.
\end{align*}
$$

<p>
To see this, we have performed the following divisions by 2

<p>

<div class="row">
  <div class="col-xs-6">
    <table class="table table-striped table-hover table-condensed">
<tr></tr>
<tbody>
<tr><td align="center">   417/2=208    </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{0} \) is 1    </td> </tr>
<tr><td align="center">   208/2=104    </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{1} \) is 0    </td> </tr>
<tr><td align="center">   104/2=52     </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{2} \) is 0    </td> </tr>
<tr><td align="center">   52/2=26      </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{3} \) is 0    </td> </tr>
<tr><td align="center">   26/2=13      </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{4} \) is 0    </td> </tr>
<tr><td align="center">   13/2= 6      </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{5} \) is 1    </td> </tr>
<tr><td align="center">   6/2= 3       </td> <td align="center">   remainder 0    </td> <td align="center">   coefficient of \( 2^{6} \) is 0    </td> </tr>
<tr><td align="center">   3/2= 1       </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{7} \) is 1    </td> </tr>
<tr><td align="center">   1/2= 0       </td> <td align="center">   remainder 1    </td> <td align="center">   coefficient of \( 2^{8} \) is 1    </td> </tr>
</tbody>
    </table>
  </div> <!-- col-xs-6 -->
</div> <!-- cell row -->
<p>
Let us now look at the <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program2.cpp" target="_self">code which takes as input from the command line a number in the decimal representation and converts it into the binary representation</a>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cstdio&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cstdlib&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span> (<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
{
  <span style="color: #B00040">int</span> terms[<span style="color: #666666">32</span>]; <span style="color: #408080; font-style: italic">// storage of a0, a1, etc, up to 32 bits</span>
  <span style="color: #B00040">int</span> number <span style="color: #666666">=</span> atoi(argv[<span style="color: #666666">1</span>]); 
  <span style="color: #408080; font-style: italic">// initialise the term a0, a1 etc</span>
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> i<span style="color: #666666">=0</span>; i <span style="color: #666666">&lt;</span> <span style="color: #666666">32</span> ; i<span style="color: #666666">++</span>) terms[i] <span style="color: #666666">=</span> <span style="color: #666666">0</span>;
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> i<span style="color: #666666">=0</span>; i <span style="color: #666666">&lt;</span> <span style="color: #666666">32</span> ; i<span style="color: #666666">++</span>){ 
    terms[i] <span style="color: #666666">=</span> number<span style="color: #666666">%2</span>;   <span style="color: #408080; font-style: italic">// modulo division done by %</span>
    number <span style="color: #666666">/=</span> <span style="color: #666666">2</span>; 
  }
  <span style="color: #408080; font-style: italic">// write out results</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Number of bytes used= &quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #008000; font-weight: bold">sizeof</span>(number) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #008000; font-weight: bold">for</span> (i<span style="color: #666666">=0</span>; i <span style="color: #666666">&lt;</span> <span style="color: #666666">32</span> ; i<span style="color: #666666">++</span>){ 
    cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot; Term nr: &quot;</span> <span style="color: #666666">&lt;&lt;</span> i <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Value= &quot;</span> <span style="color: #666666">&lt;&lt;</span> terms[i];
    cout <span style="color: #666666">&lt;&lt;</span> endl;
  }
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;  
}
</pre></div>
<p>
To be noted here is the way we define a loop in C++. Our first encounter is

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #008000; font-weight: bold">for</span> (i<span style="color: #666666">=0</span>; i <span style="color: #666666">&lt;</span> <span style="color: #666666">32</span> ; i<span style="color: #666666">++</span>){ terms[i] <span style="color: #666666">=</span> <span style="color: #666666">0</span>;}
</pre></div>
<p>
The loop starts with the <b>for</b> declaration, followed by a parenthesis hwere we declare the starting values (<b>i=0</b>) and the end value
(<b>i < 32</b>). What would have happened if we declared the endpoint as <b>i <=32</b>?

<p>
This loop is just a oneliner that serves to initialize the array _terms[]_ to zero. Note the way we can write increment by one via <b>i++</b>.

<p>
Our next loop

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> i<span style="color: #666666">=0</span>; i <span style="color: #666666">&lt;</span> <span style="color: #666666">32</span> ; i<span style="color: #666666">++</span>){ 
    terms[i] <span style="color: #666666">=</span> number<span style="color: #666666">%2</span>;   <span style="color: #408080; font-style: italic">// modulo division done by %</span>
    number <span style="color: #666666">/=</span> <span style="color: #666666">2</span>; 
  }
</pre></div>
<p>
contains the actual algorithm for the translation of an integer in the decimal representation to an integer in the binary representation. We note the way we use the curly parentheses to mark where the content inside a loop starts and where it ends. It is useful to introduce some indentation (many text editors do this automatically for you when the file ends with <b>.cpp</b>) in order to increase readability.

<p>
The function <b>sizeof()</b> tells how many bytes are used to store a given variable. An integer is by default defined in terms of four bytes or 32 bits.

<p>
Our next example is a program that calculates the second derivative numerically  of a function (the exponential function here) and writes the result to a file declared by the user. The first thing to notice is declaration of the object <b>ofile</b> which inherits all functionality from the <b>ofstream</b> class. <a href="http://www.cplusplus.com/reference/fstream/ofstream/" target="_self">This class</a> (to be discussed later below in connection with classes) overloads functions like writing to file, opening files, closing files etc. A similar class exists, the <b>ifstream</b> class, for input variables. 
Adding the header file <b>fstream</b> gives us access to the functionality of the <b>ofstream</b> class. 
The <b>iomanip</b> header files allows to format our output with functions like <b>setprecision</b>, <b>setw</b> etc.

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;fstream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iomanip&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #408080; font-style: italic">// output file as global variable</span>
ofstream ofile;

<span style="color: #408080; font-style: italic">// Begin of main program</span>

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
{
  <span style="color: #B00040">char</span> <span style="color: #666666">*</span>outfilename;
  <span style="color: #408080; font-style: italic">// Read in output file, abort if there are too few command-line arguments</span>
  <span style="color: #008000; font-weight: bold">if</span>( argc <span style="color: #666666">&lt;=</span> <span style="color: #666666">3</span> ){
    cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Bad Usage: &quot;</span> <span style="color: #666666">&lt;&lt;</span> argv[<span style="color: #666666">0</span>] <span style="color: #666666">&lt;&lt;</span>
      <span style="color: #BA2121">&quot; read also output file, number of integration points and the final x values  on same line, four variables in total&quot;</span> <span style="color: #666666">&lt;&lt;</span> std<span style="color: #666666">::</span>endl;
    exit(<span style="color: #666666">1</span>);
  }
  <span style="color: #008000; font-weight: bold">else</span>{
    outfilename<span style="color: #666666">=</span>argv[<span style="color: #666666">1</span>];
  }
  <span style="color: #408080; font-style: italic">//  opening a file for the program</span>
  ofile.open(outfilename);
  <span style="color: #408080; font-style: italic">// extracting number of mesh points</span>
  <span style="color: #B00040">int</span> i <span style="color: #666666">=</span> atoi(argv[<span style="color: #666666">2</span>]);
  <span style="color: #B00040">double</span> x <span style="color: #666666">=</span> atof(argv[<span style="color: #666666">3</span>]);  <span style="color: #408080; font-style: italic">// reading x-value</span>
  <span style="color: #B00040">double</span> h <span style="color: #666666">=</span> <span style="color: #666666">1.0/</span>((<span style="color: #B00040">double</span>) i); <span style="color: #408080; font-style: italic">// setting up step size</span>
  <span style="color: #B00040">double</span> Derivative <span style="color: #666666">=</span> (exp(x<span style="color: #666666">+</span>h)<span style="color: #666666">-2.*</span>exp(x)<span style="color: #666666">+</span>exp(x<span style="color: #666666">-</span>h))<span style="color: #666666">/</span>(h<span style="color: #666666">*</span>h);
  <span style="color: #B00040">double</span> RelativeError <span style="color: #666666">=</span> log10(fabs(Derivative<span style="color: #666666">-</span>exp(x))<span style="color: #666666">/</span>exp(x));
  ofile <span style="color: #666666">&lt;&lt;</span>  setw(<span style="color: #666666">15</span>) <span style="color: #666666">&lt;&lt;</span> setprecision(<span style="color: #666666">8</span>) <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;relative error=&quot;</span> <span style="color: #666666">&lt;&lt;</span> RelativeError <span style="color: #666666">&lt;&lt;</span> endl;
  ofile.close();  <span style="color: #408080; font-style: italic">// close output file</span>
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
}
</pre></div>
<p>
We have in addition included some safety valves here. In case we have less than four variables on the command line, the program aborts.
After having read the name of the output file we open the file  and by default we can write to it via the statement
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  ofile.open(outfilename);
</pre></div>
<p>
and we close it at the end by
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  ofile.close();
</pre></div>
<p>
We have also defined how to write to file our result in a formatted way via the statement
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  ofile <span style="color: #666666">&lt;&lt;</span>  setw(<span style="color: #666666">15</span>) <span style="color: #666666">&lt;&lt;</span> setprecision(<span style="color: #666666">8</span>) <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;relative error=&quot;</span> <span style="color: #666666">&lt;&lt;</span> RelativeError <span style="color: #666666">&lt;&lt;</span> endl;
</pre></div>
<p>
where we reserve a field width of 15 characters and a precision of eight leading digits after the decimal point.

<p>
The above example represents our first simple case where we write our results to file. Before we proceed now, we need to say something more about pointers.

<h2 id="___sec3" class="anchor">Technical Matter in C/C++: Pointers </h2>

<p>
Variables are stored in the memory of a computer and each location in memory is defined by a unique address. How is memory management done?

<p>
The main memory contains the program data

<ul>
<li> Cache memory contains a copy of the main memory data</li>
<li> Cache is faster but consumes more space and power. It is normally assumed to be much faster than main memory</li>
<li> Registers contain working data only</li>

<ul>
 <li> Modern CPUs perform most or all operations only on data in register</li>
</ul>

<li> Multiple Cache memories contain a copy of the main memory data</li>

<ul>
 <li> Cache items accessed by their address in main memory</li>
 <li> L1 cache is the fastest but has the least capacity</li>
 <li> L2, L3 provide intermediate performance/size tradeoffs</li>
</ul>

</ul>

Loads and stores to memory can be as important as floating point operations when we measure performance.

<ul>
<li> Most communication in a computer is carried out in chunks, blocks of bytes of data that move together</li>
<li> In the memory hierarchy, data moves between memory and cache, and between different levels of cache, in groups called lines</li>

<ul>
 <li> Lines are typically 64-128 bytes, or 8-16 double precision words</li>
 <li> Even if you do not use the data, it is moved and occupies space in the cache</li>
</ul>

<li> This performance feature is not captured in most programming languages</li>
</ul>

When we store variables in memory, each memory location is identified and referenced with an address (like a house number specifies where a particular family resides on a street).
Pointers play a central role in understanding memory management in C++. A pointer is just another name for an address and a pointer specifies where a value resides in the computer's memory.

<p>
A pointer points to an address not to a data container of any kind! It is a variable (with its own address in memory) whose value is the address of some other memory location. C++ as programming language offers several operations that allow us to access say elements of an array in an efficient way by accessing data by their addresses.

<p>
Let us look at some simple example declarations. We define four variables and each of them is storeed in memory schematically as shown here (think of every box as a slot in memory of say 32 bits or more for each slot)

<div class="row">
  <div class="col-xs-3">
    <table class="table table-striped table-hover table-condensed">
<thead>
<tr><td align="center"><b>int a</b></td> <td align="center"><b>int b</b></td> <td align="center"><b>double c</b></td> <td align="center"><b>int d</b></td> <td align="center"><b>double e</b></td> </tr>
</thead>
<tbody>
<tr><td align="center">   112      </td> <td align="center">   -1       </td> <td align="center">   3.14        </td> <td align="center">   ?        </td> <td align="center">   ?           </td> </tr>
</tbody>
    </table>
  </div> <!-- col-xs-3 -->
</div> <!-- cell row -->
<p>
We have put questions marks for the values of the variables <b>d</b> and <b>e</b>. 
In the program here we define <b>a</b> and <b>b</b> as integers and <b>c</b> as a double. The variables <b>d</b> and <b>e</b> are declared as pointers. 
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
<span style="color: #408080; font-style: italic">//  Declare functions before main</span>
<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span> <span style="color: #666666">*</span>argv[])
{
  <span style="color: #B00040">int</span> a <span style="color: #666666">=112</span>, b <span style="color: #666666">=</span> <span style="color: #666666">-1</span>;
  <span style="color: #B00040">double</span> c <span style="color: #666666">=</span> <span style="color: #666666">3.14</span>;
  <span style="color: #B00040">int</span> <span style="color: #666666">*</span>d <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>a;
  <span style="color: #B00040">double</span>  <span style="color: #666666">*</span>e <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>c;

  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Address of the integer variable a :&quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">&amp;</span>a <span style="color: #666666">&lt;&lt;</span>endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Value of the integer pointer variable d:&quot;</span> <span style="color: #666666">&lt;&lt;</span> d <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Value which pointer d is pointing at :&quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">*</span>d <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Address of the double variable c :&quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">&amp;</span>c <span style="color: #666666">&lt;&lt;</span>endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Value of the integer pointer variable e:&quot;</span> <span style="color: #666666">&lt;&lt;</span> e <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Value which pointer e is pointing at :&quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">*</span>e <span style="color: #666666">&lt;&lt;</span> endl;


  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
} <span style="color: #408080; font-style: italic">// End: function main()</span>
</pre></div>
<p>
Running this <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program11.cpp" target="_self">program</a> we get the following
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Address of the integer variable a :0x7fff56966a7c
Value of the integer pointer variable d:0x7fff56966a7c
Value which pointer d is pointing at :112
Address of the double variable c :0x7fff56966a70
Value of the integer pointer variable e:0x7fff56966a70
Value which pointer e is pointing at :3.14
</pre></div>
<p>
we see that the value of <b>d</b> is the address of <b>a</b> and it points to the value \( 112 \) stored in the memory slot reserved for <b>a</b>. Similarly, <b>e</b> is a pointer and gets as value the address of <b>c</b>, which is \( 0x7fff56966a70 \) which points to the value of \( 3.14 \). The operation
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">int</span> <span style="color: #666666">*</span>d <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>a;
</pre></div>
<p>
is called dereferencing. We could alternatively have written
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">int</span> <span style="color: #666666">*</span>d;
  d <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>a;
</pre></div>
<p>
where the latter means that <b>d</b> gets as value the address of <b>a</b>. The print statement
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Value which pointer d is pointing at :&quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">*</span>d <span style="color: #666666">&lt;&lt;</span> endl;
</pre></div>
<p>
then prints the actual number it points at, that is the vaue of the variable <b>a</b>.

<p>
<a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program7.cpp" target="_self"> Another pPointer example </a> is the following program

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
  <span style="color: #B00040">int</span> var;
  <span style="color: #B00040">int</span> <span style="color: #666666">*</span>p;
  p <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>var;
  var  <span style="color: #666666">=</span> <span style="color: #666666">421</span>;
  printf(<span style="color: #BA2121">&quot;Address of integer variable var : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #666666">&amp;</span>var);
  printf(<span style="color: #BA2121">&quot;Its value: %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, var);
  printf(<span style="color: #BA2121">&quot;Value of integer pointer p : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,p);
  printf(<span style="color: #BA2121">&quot;The value p points at :  %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #666666">*</span>p);
  printf(<span style="color: #BA2121">&quot;Address of the pointer p : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>,<span style="color: #666666">&amp;</span>p);
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
}
</pre></div>
<p>
Dissecting it we have (now with the <b>printf</b> function from standard C)

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>()
{
  <span style="color: #B00040">int</span> var;     <span style="color: #408080; font-style: italic">// Define an integer variable var</span>
  <span style="color: #B00040">int</span> <span style="color: #666666">*</span>p;      <span style="color: #408080; font-style: italic">// Define a pointer to an integer</span>
  p <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>var;    <span style="color: #408080; font-style: italic">// Extract the address of var</span>
  var <span style="color: #666666">=</span> <span style="color: #666666">421</span>;   <span style="color: #408080; font-style: italic">// Change content of var</span>
  printf(<span style="color: #BA2121">&quot;Address of integer variable var : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, <span style="color: #666666">&amp;</span>var);
  printf(<span style="color: #BA2121">&quot;Its value: %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, var);  <span style="color: #408080; font-style: italic">// 421</span>
  printf(<span style="color: #BA2121">&quot;Value of integer pointer p : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, p);  <span style="color: #408080; font-style: italic">// = &amp;var</span>
  <span style="color: #408080; font-style: italic">// The content of the variable pointed to by p is *p</span>
  printf(<span style="color: #BA2121">&quot;The value p points at :  %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, <span style="color: #666666">*</span>p);
  <span style="color: #408080; font-style: italic">// Address where the pointer is stored in memory</span>
  printf(<span style="color: #BA2121">&quot;Address of the pointer p : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, <span style="color: #666666">&amp;</span>p);
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
}
</pre></div>
<p>
and running the code we get
<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Address of integer variable var : 0x7fff5cfe6ae8
Its value: 421
Value of integer pointer p : 0x7fff5cfe6ae8
The value p points at :  421
Address of the pointer p : 0x7fff5cfe6ae0
</pre></div>
<p>
We see again that the value of the pointer <b>p</b> is the address of the variable <b>var</b>.

<p>
<a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/IntroProgramming/cpp/program8.cpp" target="_self">The next pointer example</a> deals with arrays and how to access array elements with pointer operations. 
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">int</span> matr[<span style="color: #666666">2</span>];    <span style="color: #408080; font-style: italic">// Define integer array with two elements</span>
<span style="color: #B00040">int</span> <span style="color: #666666">*</span>p;         <span style="color: #408080; font-style: italic">// Define pointer to integer</span>
p <span style="color: #666666">=</span> <span style="color: #666666">&amp;</span>matr[<span style="color: #666666">0</span>];   <span style="color: #408080; font-style: italic">// Point to the address of the first element in matr</span>
matr[<span style="color: #666666">0</span>] <span style="color: #666666">=</span> <span style="color: #666666">321</span>;  <span style="color: #408080; font-style: italic">// Change the first element</span>
matr[<span style="color: #666666">1</span>] <span style="color: #666666">=</span> <span style="color: #666666">322</span>;  <span style="color: #408080; font-style: italic">// Change the second element</span>
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Address of matrix element matr[1]: %p&quot;</span>, <span style="color: #666666">&amp;</span>matr[<span style="color: #666666">0</span>]);
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Value of the  matrix element  matr[1]; %d&quot;</span>, matr[<span style="color: #666666">0</span>]);
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Address of matrix element matr[2]: %p&quot;</span>, <span style="color: #666666">&amp;</span>matr[<span style="color: #666666">1</span>]);
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Value of the matrix element  matr[2]: %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, matr[<span style="color: #666666">1</span>]);
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Value of the pointer p: %p&quot;</span>, p);
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">The value p points to: %d&quot;</span>, <span style="color: #666666">*</span>p);
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">The value that (p+1) points to  %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, <span style="color: #666666">*</span>(p<span style="color: #666666">+1</span>));
printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">Address of pointer p : %p</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, <span style="color: #666666">&amp;</span>p);
</pre></div>
<p>
Here we define an array with two elements. The pointer <b>p</b> gets as value the address of the first element. The output of this program is

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Address of the matrix element matr[1]: 0xbfffef70
Value of the  matrix element  matr[1]; 321
Address of the matrix element matr[2]: 0xbfffef74
Value of the matrix element  matr[2]: 322
Value of the pointer: 0xbfffef70
The value pointer points at: 321
The value that (pointer+1) points at:  322
Address of the pointer variable : 0xbfffef6c
</pre></div>
<p>
We note that the operation
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>printf(<span style="color: #BA2121">&quot;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">The value that (p+1) points to  %d</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&quot;</span>, <span style="color: #666666">*</span>(p<span style="color: #666666">+1</span>));
</pre></div>
<p>
allows us to print the address of the second array element. This is the way we can use pointers to access array elements.

<p>
Let us now discuss another subtle issue, that is transfer of data using call by value and call by reference, shown in the <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program6.cpp" target="_self">program here</a>.

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
<span style="color: #408080; font-style: italic">//  Declare functions before main</span>
<span style="color: #B00040">void</span> <span style="color: #0000FF">func</span>(<span style="color: #B00040">int</span>, <span style="color: #B00040">int</span><span style="color: #666666">*</span>);
<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span> <span style="color: #666666">*</span>argv[]) 
{
  <span style="color: #B00040">int</span> a; 
  <span style="color: #B00040">int</span> <span style="color: #666666">*</span>b;
  a <span style="color: #666666">=</span> <span style="color: #666666">10</span>;
  b <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">int</span>[<span style="color: #666666">10</span>];
  <span style="color: #008000; font-weight: bold">for</span>(<span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> <span style="color: #666666">10</span>; i<span style="color: #666666">++</span>) {
    b[i] <span style="color: #666666">=</span> i;
    cout <span style="color: #666666">&lt;&lt;</span>  b[i] <span style="color: #666666">&lt;&lt;</span> endl;
  }
  <span style="color: #408080; font-style: italic">// the variable a is transferred by call by value. This means</span>
  <span style="color: #408080; font-style: italic">//  that the function func cannot change a in the calling function</span>
  func( a,b);
  
  <span style="color: #008000; font-weight: bold">delete</span> [] b ; 
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
} <span style="color: #408080; font-style: italic">// End: function main()</span>

<span style="color: #B00040">void</span> <span style="color: #0000FF">func</span>( <span style="color: #B00040">int</span> x, <span style="color: #B00040">int</span> <span style="color: #666666">*</span>y) 
{
  <span style="color: #408080; font-style: italic">// a becomes locally x  and it can be changed locally</span>
  x<span style="color: #666666">+=7</span>;
  <span style="color: #408080; font-style: italic">//  func gets the address of the first element of y (b)</span>
  <span style="color: #408080; font-style: italic">// it changes y[0] to 10 and when returning control to main</span>
  <span style="color: #408080; font-style: italic">// it changes also b[0]. Call by reference</span>
  <span style="color: #666666">*</span>y <span style="color: #666666">+=</span> <span style="color: #666666">10</span>;  <span style="color: #408080; font-style: italic">//  *y = *y+10;</span>
  <span style="color: #408080; font-style: italic">//  explicit element </span>
  y[<span style="color: #666666">6</span>] <span style="color: #666666">+=</span> <span style="color: #666666">10</span>;
  <span style="color: #408080; font-style: italic">//   in this function y[0]  and y[6] have been changed and when returning </span>
  <span style="color: #408080; font-style: italic">// control to main  this means that b[0] and b[6] are changed.  </span>
  <span style="color: #008000; font-weight: bold">return</span>;
} <span style="color: #408080; font-style: italic">// End: function func()</span>
</pre></div>
<p>
There are several things to notice here. First, we have now declared a function <b>func</b>. This declaration is placed before the main function. If we don't do that the main function does not know how this function is to be used. The function takes as input an integer and an integer pointer defined by the asterix in
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">void</span> <span style="color: #0000FF">func</span>(<span style="color: #B00040">int</span>, <span style="color: #B00040">int</span><span style="color: #666666">*</span>);
</pre></div>
<p>
This means that we transfer an address (in this case the address of the first element of the pointer <b>b</b>). This is called <b>call by reference</b>.
It means that the function <b>func</b> can change the value of <b>b</b> upon returning the instruction pointer to the main program (or calling function).
The other variable is transferred through what we label as  <b>call by value</b>. In this case the called function can change the value of <b>a</b> locally but cannot change the value of this variable in the calling function.
The function <b>func</b> func gets the address of the first element of y (b) and changes y[0] to 10 and when returning control to main
it changes also b[0]. This is done via
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #666666">*</span>y <span style="color: #666666">+=</span> <span style="color: #666666">10</span>;  
</pre></div>
<p>
This changes only the first element. To change another element, we would write (unless we use pointer operations)
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  y[<span style="color: #666666">6</span>] <span style="color: #666666">+=</span> <span style="color: #666666">10</span>;
</pre></div>
<p>
which changes \( \mathbf{y[6]} \)  to \( 16 \), since its orginal value was \( 6 \), as defined in the main function. Using pointer operations we could write this as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #666666">*</span>(y<span style="color: #666666">+6</span>) <span style="color: #666666">+=</span> <span style="color: #666666">10</span>;
</pre></div>
<p>
and it produces the same result. It states that the value of the element which resides in \( \mathbf{y[6]} \) is to be changed to \( 16 \).

<p>
C++ allows the programmer to use solely call by reference (note that call by reference is implemented as pointers). To see the difference between C and C++, consider the following simple examples.
In C we would write

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #B00040">int</span> n; n <span style="color: #666666">=8</span>;
   func(<span style="color: #666666">&amp;</span>n); <span style="color: #408080; font-style: italic">/* &amp;n is a pointer to n */</span>
   ....
   <span style="color: #B00040">void</span> func(<span style="color: #B00040">int</span> <span style="color: #666666">*</span>i)
   {
     <span style="color: #666666">*</span>i <span style="color: #666666">=</span> <span style="color: #666666">10</span>; <span style="color: #408080; font-style: italic">/* n is changed to 10 */</span>
     ....
   }
</pre></div>
<p>
whereas in C++ we would write
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #B00040">int</span> n; n <span style="color: #666666">=8</span>;
   func(n); <span style="color: #408080; font-style: italic">// just transfer n itself</span>
   ....
   <span style="color: #B00040">void</span> func(<span style="color: #B00040">int</span><span style="color: #666666">&amp;</span> i)
   {
     i <span style="color: #666666">=</span> <span style="color: #666666">10</span>; <span style="color: #408080; font-style: italic">// n is changed to 10</span>
     ....
   }
</pre></div>
<p>
The reason why we emphasize the difference between call by value and call
by reference is that it allows the programmer to avoid pitfalls
like unwanted changes of variables. However, many people feel that this
reduces the readability of the code.

<p>
Let us look at further Example codes in C++, with writing to file and <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program5.cpp" target="_self">dynamic allocation for arrays</a>

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;fstream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iomanip&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std; 

<span style="color: #408080; font-style: italic">// output file as global variable</span>

ofstream ofile;  

<span style="color: #408080; font-style: italic">// Begin of main program   </span>

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
{
  <span style="color: #B00040">char</span> <span style="color: #666666">*</span>outfilename;
  <span style="color: #408080; font-style: italic">// Read in output file, abort if there are too few command-line arguments</span>
  <span style="color: #008000; font-weight: bold">if</span>( argc <span style="color: #666666">&lt;=</span> <span style="color: #666666">2</span> ){
    cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Bad Usage: &quot;</span> <span style="color: #666666">&lt;&lt;</span> argv[<span style="color: #666666">0</span>] <span style="color: #666666">&lt;&lt;</span> 
      <span style="color: #BA2121">&quot; read also output file and number of elements on same line&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
    exit(<span style="color: #666666">1</span>);
  }
  <span style="color: #008000; font-weight: bold">else</span>{
    outfilename<span style="color: #666666">=</span>argv[<span style="color: #666666">1</span>];
  }

  <span style="color: #408080; font-style: italic">//  opening a file for the program</span>
  ofile.open(outfilename); 
  <span style="color: #B00040">int</span> i <span style="color: #666666">=</span> atoi(argv[<span style="color: #666666">2</span>]); 
 <span style="color: #408080; font-style: italic">/* we can define it as </span>
<span style="color: #408080; font-style: italic">  int *a;</span>
<span style="color: #408080; font-style: italic">  a = new int[i];</span>
<span style="color: #408080; font-style: italic">  or as</span>
<span style="color: #408080; font-style: italic"> */</span>
  <span style="color: #B00040">double</span> <span style="color: #666666">*</span>a <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[i]; 
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot; bytes for i=&quot;</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #008000; font-weight: bold">sizeof</span>(i) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> j <span style="color: #666666">=</span> <span style="color: #666666">0</span>; j <span style="color: #666666">&lt;</span> i; j<span style="color: #666666">++</span>) {
    a[j] <span style="color: #666666">=</span> j<span style="color: #666666">*</span>exp(<span style="color: #666666">2.0</span>);
    <span style="color: #408080; font-style: italic">// ofile instead of cout</span>
    ofile <span style="color: #666666">&lt;&lt;</span> setw(<span style="color: #666666">15</span>) <span style="color: #666666">&lt;&lt;</span> setprecision(<span style="color: #666666">8</span>) <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;a=&quot;</span> <span style="color: #666666">&lt;&lt;</span> a[j] <span style="color: #666666">&lt;&lt;</span> endl;
  }
  <span style="color: #008000; font-weight: bold">delete</span> [] a; <span style="color: #408080; font-style: italic">// free memory</span>
  ofile.close();  <span style="color: #408080; font-style: italic">// close output file</span>
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
}
</pre></div>
<p>
Here we read from the command line the number of elements <b>i</b> via
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">int</span> i <span style="color: #666666">=</span> atoi(argv[<span style="color: #666666">2</span>]); 
</pre></div>
<p>
and allocate memory dynamically by declaring a pointer array (a vector here) <b>a</b> using
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">double</span> <span style="color: #666666">*</span>a <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[i];
</pre></div>
<p>
Using dynamic memory allocation we actually allow  memory to be more flexibly and explicitly managed.
When the memory is no longer needed, the pointer is passed to free which deallocates the memory so that it can be used for other purposes. This is done by the <b>delete</b> statement
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #008000; font-weight: bold">delete</span> [] a; <span style="color: #408080; font-style: italic">// free memory</span>
</pre></div>
<p>
In the loop
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> j <span style="color: #666666">=</span> <span style="color: #666666">0</span>; j <span style="color: #666666">&lt;</span> i; j<span style="color: #666666">++</span>) {
    a[j] <span style="color: #666666">=</span> j<span style="color: #666666">*</span>exp(<span style="color: #666666">2.0</span>);
    <span style="color: #408080; font-style: italic">// ofile instead of cout</span>
    ofile <span style="color: #666666">&lt;&lt;</span> setw(<span style="color: #666666">15</span>) <span style="color: #666666">&lt;&lt;</span> setprecision(<span style="color: #666666">8</span>) <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;a=&quot;</span> <span style="color: #666666">&lt;&lt;</span> a[j] <span style="color: #666666">&lt;&lt;</span> endl;
  }
</pre></div>
<p>
we assign a specific value to each array element and print to file.

<p>
If we wish to time our function, the following <a href="https://github.com/CompPhysics/ComputationalPhysicsMSU/blob/master/doc/Programs/LecturePrograms/programs/Classes/cpp/program7.cpp" target="_self">program</a> gives a typical example. 
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cstdlib&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iomanip&gt; </span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&quot;time.h&quot;   // Not the use time.h</span><span style="color: #BC7A00"></span>

<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std; <span style="color: #408080; font-style: italic">// note use of namespace                                       </span>
<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span> (<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">*</span> argv[])
{
  <span style="color: #B00040">int</span> i <span style="color: #666666">=</span> atoi(argv[<span style="color: #666666">1</span>]); 
  <span style="color: #B00040">double</span> <span style="color: #666666">*</span>a, <span style="color: #666666">*</span>b, <span style="color: #666666">*</span>c;
  a <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[i]; 
  b <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[i]; 
  c <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[i]; 

  <span style="color: #B00040">clock_t</span> start, finish;
  start <span style="color: #666666">=</span> clock();
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> j <span style="color: #666666">=</span> <span style="color: #666666">0</span>; j <span style="color: #666666">&lt;</span> i; j<span style="color: #666666">++</span>) {
    a[j] <span style="color: #666666">=</span> cos(j<span style="color: #666666">*1.0</span>);
    b[j] <span style="color: #666666">=</span> sin(j<span style="color: #666666">+3.0</span>);
    c[j] <span style="color: #666666">=</span> <span style="color: #666666">0.0</span>;
  }
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> j <span style="color: #666666">=</span> <span style="color: #666666">0</span>; j <span style="color: #666666">&lt;</span> i; j<span style="color: #666666">++</span>) {
    c[j] <span style="color: #666666">=</span> a[j]<span style="color: #666666">+</span>b[j];
  }
  finish <span style="color: #666666">=</span> clock();
  <span style="color: #B00040">double</span> timeused <span style="color: #666666">=</span> (<span style="color: #B00040">double</span>) (finish <span style="color: #666666">-</span> start)<span style="color: #666666">/</span>(CLOCKS_PER_SEC );
  cout <span style="color: #666666">&lt;&lt;</span> setiosflags(ios<span style="color: #666666">::</span>showpoint <span style="color: #666666">|</span> ios<span style="color: #666666">::</span>uppercase);
  cout <span style="color: #666666">&lt;&lt;</span> setprecision(<span style="color: #666666">10</span>) <span style="color: #666666">&lt;&lt;</span> setw(<span style="color: #666666">20</span>) <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Time used  for vector addition=&quot;</span> <span style="color: #666666">&lt;&lt;</span> timeused  <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #008000; font-weight: bold">delete</span> [] a;
  <span style="color: #008000; font-weight: bold">delete</span> [] b;
  <span style="color: #008000; font-weight: bold">delete</span> [] c;
  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;           <span style="color: #408080; font-style: italic">/* success execution of the program */</span>
}
</pre></div>
<p>
When timing the program, you should carefully plan what to time. Here we calculate the time difference from the point where we start filling in the three arrays <b>a</b>, <b>b</b> and <b>c</b> defining the starting time as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">clock_t</span> start, finish;
  start <span style="color: #666666">=</span> clock();
  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> j <span style="color: #666666">=</span> <span style="color: #666666">0</span>; j <span style="color: #666666">&lt;</span> i; j<span style="color: #666666">++</span>) {
</pre></div>
<p>
The final time is when all operations we are interested in are concluded, namely at
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> j <span style="color: #666666">=</span> <span style="color: #666666">0</span>; j <span style="color: #666666">&lt;</span> i; j<span style="color: #666666">++</span>) {
    c[j] <span style="color: #666666">=</span> a[j]<span style="color: #666666">+</span>b[j];
  }
  finish <span style="color: #666666">=</span> clock();
</pre></div>
<p>
The time difference from start to end, with its granularity is defined as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">double</span> timeused <span style="color: #666666">=</span> (<span style="color: #B00040">double</span>) (finish <span style="color: #666666">-</span> start)<span style="color: #666666">/</span>(CLOCKS_PER_SEC );
</pre></div>
<p>
When timing a program you should pay attention to the following:

<ol>
<li> Timers are not infinitely accurate</li>
<li> All clocks have a granularity, the minimum time that they can measure</li>
<li> The error in a time measurement, even if everything is perfect, may be the size of this granularity (sometimes called a clock tick)</li>
<li> Always know what your clock granularity is</li>
<li> Ensure that your measurement is for a long enough duration (say 100 times the <b>tick</b>)</li>
</ol>

What happens when the code is executed? The assumption is that the code is ready to
execute. But

<ol>
<li> Code may still be on disk, and not even read into memory.</li>
<li> Data may be in slow memory rather than fast (which may be wrong or right for what you are measuring)</li>
<li> Multiple tests often necessary to ensure that cold start effects are not present</li>
<li> Special effort often required to ensure data in the intended part of the memory hierarchy.</li>
</ol>

You should thus think of a numerical calculation as an experiment. To provide benchmark times you should thus run the timing measurement several times and then take the average over a series of simulations.

<h2 id="___sec4" class="anchor">Using <b>strings</b> instead of characters </h2>

<p>
Till now we have used character variables when declaring for example filenames for output or input files. C++ offers a compact and flexible way of dealing with text strings through the <b>string</b> class. In the program below we wish for example to define several output files for our calculations byapending  to a basename read in on the command line various endings. These endings can then be used to recognize a specific calculation.
Here we read the basic name of an ouput file and add to it the actual exponent used in a calculation by appending it to the file name. We show only the relevant parts 
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;fstream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iomanip&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;cmath&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;string&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #408080; font-style: italic">// use namespace for output and input</span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;

<span style="color: #408080; font-style: italic">// object for output files</span>
ofstream ofile;


<span style="color: #408080; font-style: italic">// Begin main program</span>
<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span> <span style="color: #666666">*</span>argv[]){
  <span style="color: #B00040">int</span> exponent; 
    string filename;
    <span style="color: #408080; font-style: italic">// We read also the basic name for the output file and the highest power of 10^n we want</span>
    <span style="color: #008000; font-weight: bold">if</span>( argc <span style="color: #666666">&lt;=</span> <span style="color: #666666">1</span> ){
          cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Bad Usage: &quot;</span> <span style="color: #666666">&lt;&lt;</span> argv[<span style="color: #666666">0</span>] <span style="color: #666666">&lt;&lt;</span>
              <span style="color: #BA2121">&quot; read also file name on same line and max power 10^n&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
          exit(<span style="color: #666666">1</span>);
    }
        <span style="color: #008000; font-weight: bold">else</span>{
        filename <span style="color: #666666">=</span> argv[<span style="color: #666666">1</span>]; <span style="color: #408080; font-style: italic">// first command line argument after name of program</span>
        exponent <span style="color: #666666">=</span> atoi(argv[<span style="color: #666666">2</span>]);
    }
    <span style="color: #408080; font-style: italic">// Loop over powers of 10</span>
    <span style="color: #008000; font-weight: bold">for</span> (<span style="color: #B00040">int</span> i <span style="color: #666666">=</span> <span style="color: #666666">1</span>; i <span style="color: #666666">&lt;=</span> exponent; i<span style="color: #666666">++</span>){
      <span style="color: #B00040">int</span>  n <span style="color: #666666">=</span> (<span style="color: #B00040">int</span>) pow(<span style="color: #666666">10.0</span>,i);
      <span style="color: #408080; font-style: italic">// Declare new file name</span>
      string fileout <span style="color: #666666">=</span> filename;
      <span style="color: #408080; font-style: italic">// Convert the power 10^i to a string</span>
      string argument <span style="color: #666666">=</span> to_string(i);
      <span style="color: #408080; font-style: italic">// Final filename as filename-i- by appending the power of 10</span>
      fileout.append(argument);
      ofile.open(fileout);
      ofile <span style="color: #666666">&lt;&lt;</span> setiosflags(ios<span style="color: #666666">::</span>showpoint <span style="color: #666666">|</span> ios<span style="color: #666666">::</span>uppercase);
      <span style="color: #408080; font-style: italic">//   Do something </span>
      ofile.close();  <span style="color: #408080; font-style: italic">// close output file wth given ending</span>
    }
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
}
</pre></div>
<p>
Instead of our earlier definition
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>  <span style="color: #B00040">char</span> <span style="color: #666666">*</span>outfilename;
</pre></div>
<p>
we define now the same output file via the <b>string</b> statement, inheriting thus all functionality of the <b>string</b> class by writing
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>    string filename;
</pre></div>
<p>
In the statement
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>    filename <span style="color: #666666">=</span> argv[<span style="color: #666666">1</span>]; 
</pre></div>
<p>
the variable <b>filename</b> gets the name of file we declared on the command line.
A new file for the specific calculation is then established via
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>      <span style="color: #408080; font-style: italic">// Declare new file name</span>
      string fileout <span style="color: #666666">=</span> filename;
      <span style="color: #408080; font-style: italic">// Convert the power 10^i to a string</span>
      string argument <span style="color: #666666">=</span> to_string(i);
      <span style="color: #408080; font-style: italic">// Final filename as filename-i- by appending the power of 10</span>
      fileout.append(argument);
      ofile.open(fileout);  <span style="color: #408080; font-style: italic">// then open</span>
</pre></div>
<p>
We recommend using the <b>string</b> class, it gives ou much more flexibility in handling strings.

<h2 id="___sec5" class="anchor">Matrices in C++ </h2>
Another quantity we end up using again and again are matrices.
We have  an \( N\times N \) matrix A  with \( N=100 \)
In C/C++ this would be  defined as

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #B00040">int</span> N <span style="color: #666666">=</span> <span style="color: #666666">100</span>;
   <span style="color: #B00040">double</span> A[<span style="color: #666666">100</span>][<span style="color: #666666">100</span>];
   <span style="color: #408080; font-style: italic">//   initialize all elements to zero</span>
   <span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #666666">=0</span> ; i <span style="color: #666666">&lt;</span> N ; i<span style="color: #666666">++</span>) {
      <span style="color: #008000; font-weight: bold">for</span>(j<span style="color: #666666">=0</span> ; j <span style="color: #666666">&lt;</span> N ; j<span style="color: #666666">++</span>) {
         A[i][j] <span style="color: #666666">=</span> <span style="color: #666666">0.0</span>;
</pre></div>
<p>
Note the way the matrix is organized, row-major order.

<p>
We have  \( N\times N \) matrices A, B and C and we wish to
evaluate \( A=B+C \).

$$
\mathbf{A}= \mathbf{B}\pm\mathbf{C}  \Longrightarrow a_{ij} = b_{ij}\pm c_{ij},
$$

In C/C++ this would be coded like

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #666666">=0</span> ; i <span style="color: #666666">&lt;</span> N ; i<span style="color: #666666">++</span>) {
      <span style="color: #008000; font-weight: bold">for</span>(j<span style="color: #666666">=0</span> ; j <span style="color: #666666">&lt;</span> N ; j<span style="color: #666666">++</span>) {
         a[i][j] <span style="color: #666666">=</span> b[i][j]<span style="color: #666666">+</span>c[i][j]
</pre></div>
<p>
We have  \( N\times N \) matrices A, B and C and we wish to
evaluate \( A=BC \).

$$
\mathbf{A}=\mathbf{BC}   \Longrightarrow a_{ij} = \sum_{k=1}^{n} b_{ik}c_{kj},
$$

In C/C++ this would be coded like

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>   <span style="color: #008000; font-weight: bold">for</span>(i<span style="color: #666666">=0</span> ; i <span style="color: #666666">&lt;</span> N ; i<span style="color: #666666">++</span>) {
      <span style="color: #008000; font-weight: bold">for</span>(j<span style="color: #666666">=0</span> ; j <span style="color: #666666">&lt;</span> N ; j<span style="color: #666666">++</span>) {
         <span style="color: #008000; font-weight: bold">for</span>(k<span style="color: #666666">=0</span> ; k <span style="color: #666666">&lt;</span> N ; k<span style="color: #666666">++</span>) {
            a[i][j]<span style="color: #666666">+=</span>b[i][k]<span style="color: #666666">*</span>c[k][j];
</pre></div>
<p>
The above matrices were all declared statically.
For dynamic memory allocation in C++ there are 
several  possibilities

<ul>
  <li> Do it yourself</li>
  <li> Use the functions provided in the library package <a href="https://github.com/CompPhysics/ComputationalPhysics/blob/master/doc/Programs/LecturePrograms/programs/cppLibrary/lib.cpp" target="_self">lib.cpp</a></li>
  <li> Use Armadillo <a href="http://arma.sourceforgenet" target="_self"><tt>http://arma.sourceforgenet</tt></a> (a C++ linear algebra library, discussion both here and at lab).</li> 
  <li> Write yur own matrix-vector class (to be discussed later.</li>
</ul>

A matrix in C++ is a double pointer, a pointer to a pointer. Here is how you would do it yourself.
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #B00040">int</span> N;
<span style="color: #B00040">double</span> <span style="color: #666666">**</span>  A;
A <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span><span style="color: #666666">*</span>[N]
<span style="color: #008000; font-weight: bold">for</span> ( i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> N; i<span style="color: #666666">++</span>)
    A[i] <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">double</span>[N];
</pre></div>
<p>
Always free space when you don't need an array anymore.

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">for</span> ( i <span style="color: #666666">=</span> <span style="color: #666666">0</span>; i <span style="color: #666666">&lt;</span> N; i<span style="color: #666666">++</span>)
    <span style="color: #008000; font-weight: bold">delete</span>[] A[i];
<span style="color: #008000; font-weight: bold">delete</span>[] A;
</pre></div>
<p>
You will find Armadillo as a very convenient library. 

<ul>
  <li> Armadillo is a C++ linear algebra library (matrix maths) aiming towards a good balance between speed and ease of use. The syntax is deliberately similar to Matlab.</li>
  <li> Integer, floating point and complex numbers are supported, as well as a subset of trigonometric and statistics functions. Various matrix decompositions are provided through optional integration with LAPACK, or one of its high performance drop-in replacements (such as the multi-threaded MKL or ACML libraries).</li>
  <li> A delayed evaluation approach is employed (at compile-time) to combine several operations into one and reduce (or eliminate) the need for temporaries. This is accomplished through recursive templates and template meta-programming.</li>
  <li> Useful for conversion of research code into production environments, or if C++ has been decided as the language of choice, due to speed and/or integration capabilities.</li>
  <li> The library is open-source software, and is distributed under a license that is useful in both open-source and commercial/proprietary contexts.</li>
</ul>

Here are simple examples.

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;armadillo&gt;</span><span style="color: #BC7A00"></span>

<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> arma;

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">**</span> argv)
  {
  mat A <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>mat<span style="color: #666666">&gt;</span>(<span style="color: #666666">5</span>,<span style="color: #666666">5</span>);
  mat B <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>mat<span style="color: #666666">&gt;</span>(<span style="color: #666666">5</span>,<span style="color: #666666">5</span>);

  cout <span style="color: #666666">&lt;&lt;</span> A<span style="color: #666666">*</span>B <span style="color: #666666">&lt;&lt;</span> endl;

  <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
</pre></div>
<p>
For people using Ubuntu, Debian, Linux Mint, simply go to the synaptic package manager and install
armadillo from there.
You may have to install Lapack as well.
For Mac and Windows users, follow the instructions from the webpage
<a href="http://arma.sourceforge.net" target="_self"><tt>http://arma.sourceforge.net</tt></a>.
To compile, use for example (linux/ubuntu)

<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>c<span style="color: #666666">++</span> <span style="color: #666666">-</span>O2 <span style="color: #666666">-</span>o program.x program.cpp  <span style="color: #666666">-</span>larmadillo <span style="color: #666666">-</span>llapack <span style="color: #666666">-</span>lblas
</pre></div>
<p>
where the <code>-l</code> option indicates the library you wish to link to.

<p>
For OS X users you may have to declare the paths to the include files and the libraries as
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>c<span style="color: #666666">++</span> <span style="color: #666666">-</span>O2 <span style="color: #666666">-</span>o program.x program.cpp  <span style="color: #666666">-</span>L<span style="color: #666666">/</span>usr<span style="color: #666666">/</span>local<span style="color: #666666">/</span>lib <span style="color: #666666">-</span>I<span style="color: #666666">/</span>usr<span style="color: #666666">/</span>local<span style="color: #666666">/</span>include <span style="color: #666666">-</span>larmadillo <span style="color: #666666">-</span>llapack <span style="color: #666666">-</span>lblas
</pre></div>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&quot;armadillo&quot;</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> arma;
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">**</span> argv)
  {
  <span style="color: #408080; font-style: italic">// directly specify the matrix size (elements are uninitialised)</span>
  mat A(<span style="color: #666666">2</span>,<span style="color: #666666">3</span>);
  <span style="color: #408080; font-style: italic">// .n_rows = number of rows    (read only)</span>
  <span style="color: #408080; font-style: italic">// .n_cols = number of columns (read only)</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;A.n_rows = &quot;</span> <span style="color: #666666">&lt;&lt;</span> A.n_rows <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;A.n_cols = &quot;</span> <span style="color: #666666">&lt;&lt;</span> A.n_cols <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// directly access an element (indexing starts at 0)</span>
  A(<span style="color: #666666">1</span>,<span style="color: #666666">2</span>) <span style="color: #666666">=</span> <span style="color: #666666">456.0</span>;
  A.print(<span style="color: #BA2121">&quot;A:&quot;</span>);
  <span style="color: #408080; font-style: italic">// scalars are treated as a 1x1 matrix,</span>
  <span style="color: #408080; font-style: italic">// hence the code below will set A to have a size of 1x1</span>
  A <span style="color: #666666">=</span> <span style="color: #666666">5.0</span>;
  A.print(<span style="color: #BA2121">&quot;A:&quot;</span>);
  <span style="color: #408080; font-style: italic">// if you want a matrix with all elements set to a particular value</span>
  <span style="color: #408080; font-style: italic">// the .fill() member function can be used</span>
  A.set_size(<span style="color: #666666">3</span>,<span style="color: #666666">3</span>);
  A.fill(<span style="color: #666666">5.0</span>);  A.print(<span style="color: #BA2121">&quot;A:&quot;</span>);
  mat B;

  <span style="color: #408080; font-style: italic">// endr indicates &quot;end of row&quot;</span>
  B <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.555950</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.274690</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.540605</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.798938</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.108929</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.830123</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.891726</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.895283</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.948014</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.973234</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.216504</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.883152</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.023787</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.675382</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.231751</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.450332</span> <span style="color: #666666">&lt;&lt;</span> endr;

  <span style="color: #408080; font-style: italic">// print to the cout stream</span>
  <span style="color: #408080; font-style: italic">// with an optional string before the contents of the matrix</span>
  B.print(<span style="color: #BA2121">&quot;B:&quot;</span>);

  <span style="color: #408080; font-style: italic">// the &lt;&lt; operator can also be used to print the matrix</span>
  <span style="color: #408080; font-style: italic">// to an arbitrary stream (cout in this case)</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;B:&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl <span style="color: #666666">&lt;&lt;</span> B <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// save to disk</span>
  B.save(<span style="color: #BA2121">&quot;B.txt&quot;</span>, raw_ascii);
  <span style="color: #408080; font-style: italic">// load from disk</span>
  mat C;
  C.load(<span style="color: #BA2121">&quot;B.txt&quot;</span>);
  C <span style="color: #666666">+=</span> <span style="color: #666666">2.0</span> <span style="color: #666666">*</span> B;
  C.print(<span style="color: #BA2121">&quot;C:&quot;</span>);
  <span style="color: #408080; font-style: italic">// submatrix types:</span>
  <span style="color: #408080; font-style: italic">//</span>
  <span style="color: #408080; font-style: italic">// .submat(first_row, first_column, last_row, last_column)</span>
  <span style="color: #408080; font-style: italic">// .row(row_number)</span>
  <span style="color: #408080; font-style: italic">// .col(column_number)</span>
  <span style="color: #408080; font-style: italic">// .cols(first_column, last_column)</span>
  <span style="color: #408080; font-style: italic">// .rows(first_row, last_row)</span>

  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;C.submat(0,0,3,1) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> C.submat(<span style="color: #666666">0</span>,<span style="color: #666666">0</span>,<span style="color: #666666">3</span>,<span style="color: #666666">1</span>) <span style="color: #666666">&lt;&lt;</span> endl;

  <span style="color: #408080; font-style: italic">// generate the identity matrix</span>
  mat D <span style="color: #666666">=</span> eye<span style="color: #666666">&lt;</span>mat<span style="color: #666666">&gt;</span>(<span style="color: #666666">4</span>,<span style="color: #666666">4</span>);

  D.submat(<span style="color: #666666">0</span>,<span style="color: #666666">0</span>,<span style="color: #666666">3</span>,<span style="color: #666666">1</span>) <span style="color: #666666">=</span> C.cols(<span style="color: #666666">1</span>,<span style="color: #666666">2</span>);
  D.print(<span style="color: #BA2121">&quot;D:&quot;</span>);

  <span style="color: #408080; font-style: italic">// transpose</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;trans(B) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> trans(B) <span style="color: #666666">&lt;&lt;</span> endl;

  <span style="color: #408080; font-style: italic">// maximum from each column (traverse along rows)</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;max(B) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> max(B) <span style="color: #666666">&lt;&lt;</span> endl;

  <span style="color: #408080; font-style: italic">// maximum from each row (traverse along columns)</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;max(B,1) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> max(B,<span style="color: #666666">1</span>) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// maximum value in B</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;max(max(B)) = &quot;</span> <span style="color: #666666">&lt;&lt;</span> max(max(B)) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// sum of each column (traverse along rows)</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;sum(B) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> sum(B) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// sum of each row (traverse along columns)</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;sum(B,1) =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> sum(B,<span style="color: #666666">1</span>) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// sum of all elements</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;sum(sum(B)) = &quot;</span> <span style="color: #666666">&lt;&lt;</span> sum(sum(B)) <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;accu(B)     = &quot;</span> <span style="color: #666666">&lt;&lt;</span> accu(B) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// trace = sum along diagonal</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;trace(B)    = &quot;</span> <span style="color: #666666">&lt;&lt;</span> trace(B) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// random matrix -- values are uniformly distributed in the [0,1] interval</span>
  mat E <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>mat<span style="color: #666666">&gt;</span>(<span style="color: #666666">4</span>,<span style="color: #666666">4</span>);
  E.print(<span style="color: #BA2121">&quot;E:&quot;</span>);

  <span style="color: #408080; font-style: italic">// row vectors are treated like a matrix with one row</span>
  rowvec r;
  r <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.59499</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.88807</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.88532</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.19968</span>;
  r.print(<span style="color: #BA2121">&quot;r:&quot;</span>);

  <span style="color: #408080; font-style: italic">// column vectors are treated like a matrix with one column</span>
  colvec q;
  q <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.81114</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.06256</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.95989</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.73628</span>;
  q.print(<span style="color: #BA2121">&quot;q:&quot;</span>);

  <span style="color: #408080; font-style: italic">// dot or inner product</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;as_scalar(r*q) = &quot;</span> <span style="color: #666666">&lt;&lt;</span> as_scalar(r<span style="color: #666666">*</span>q) <span style="color: #666666">&lt;&lt;</span> endl;

    <span style="color: #408080; font-style: italic">// outer product</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;q*r =&quot;</span> <span style="color: #666666">&lt;&lt;</span> endl;
  cout <span style="color: #666666">&lt;&lt;</span> q<span style="color: #666666">*</span>r <span style="color: #666666">&lt;&lt;</span> endl;


  <span style="color: #408080; font-style: italic">// sum of three matrices (no temporary matrices are created)</span>
  mat F <span style="color: #666666">=</span> B <span style="color: #666666">+</span> C <span style="color: #666666">+</span> D;
  F.print(<span style="color: #BA2121">&quot;F:&quot;</span>);

    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
</pre></div>
<p>

<!-- code=c++ (!bc cppcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&lt;iostream&gt;</span><span style="color: #BC7A00"></span>
<span style="color: #BC7A00">#include</span> <span style="color: #408080; font-style: italic">&quot;armadillo&quot;</span><span style="color: #BC7A00"></span>
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> arma;
<span style="color: #008000; font-weight: bold">using</span> <span style="color: #008000; font-weight: bold">namespace</span> std;

<span style="color: #B00040">int</span> <span style="color: #0000FF">main</span>(<span style="color: #B00040">int</span> argc, <span style="color: #B00040">char</span><span style="color: #666666">**</span> argv)
  {
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;Armadillo version: &quot;</span> <span style="color: #666666">&lt;&lt;</span> arma_version<span style="color: #666666">::</span>as_string() <span style="color: #666666">&lt;&lt;</span> endl;

  mat A;

  A <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.165300</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.454037</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.995795</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.124098</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.047084</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.688782</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.036549</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.552848</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.937664</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.866401</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.348740</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.479388</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.506228</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.145673</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.491547</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.148678</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.682258</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.571154</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.874724</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.444632</span> <span style="color: #666666">&lt;&lt;</span> endr
    <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.245726</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.595218</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.409327</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.367827</span> <span style="color: #666666">&lt;&lt;</span> <span style="color: #666666">0.385736</span> <span style="color: #666666">&lt;&lt;</span> endr;

  A.print(<span style="color: #BA2121">&quot;A =&quot;</span>);

  <span style="color: #408080; font-style: italic">// determinant</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;det(A) = &quot;</span> <span style="color: #666666">&lt;&lt;</span> det(A) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #408080; font-style: italic">// inverse</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;inv(A) = &quot;</span> <span style="color: #666666">&lt;&lt;</span> endl <span style="color: #666666">&lt;&lt;</span> inv(A) <span style="color: #666666">&lt;&lt;</span> endl;
  <span style="color: #B00040">double</span> k <span style="color: #666666">=</span> <span style="color: #666666">1.23</span>;

  mat    B <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>mat<span style="color: #666666">&gt;</span>(<span style="color: #666666">5</span>,<span style="color: #666666">5</span>);
  mat    C <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>mat<span style="color: #666666">&gt;</span>(<span style="color: #666666">5</span>,<span style="color: #666666">5</span>);

  rowvec r <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>rowvec<span style="color: #666666">&gt;</span>(<span style="color: #666666">5</span>);
  colvec q <span style="color: #666666">=</span> randu<span style="color: #666666">&lt;</span>colvec<span style="color: #666666">&gt;</span>(<span style="color: #666666">5</span>);


  <span style="color: #408080; font-style: italic">// examples of some expressions</span>
  <span style="color: #408080; font-style: italic">// for which optimised implementations exist</span>
  <span style="color: #408080; font-style: italic">// optimised implementation of a trinary expression</span>
  <span style="color: #408080; font-style: italic">// that results in a scalar</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;as_scalar( r*inv(diagmat(B))*q ) = &quot;</span>;
  cout <span style="color: #666666">&lt;&lt;</span> as_scalar( r<span style="color: #666666">*</span>inv(diagmat(B))<span style="color: #666666">*</span>q ) <span style="color: #666666">&lt;&lt;</span> endl;

  <span style="color: #408080; font-style: italic">// example of an expression which is optimised</span>
  <span style="color: #408080; font-style: italic">// as a call to the dgemm() function in BLAS:</span>
  cout <span style="color: #666666">&lt;&lt;</span> <span style="color: #BA2121">&quot;k*trans(B)*C = &quot;</span> <span style="color: #666666">&lt;&lt;</span> endl <span style="color: #666666">&lt;&lt;</span> k<span style="color: #666666">*</span>trans(B)<span style="color: #666666">*</span>C;

    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>;
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pagination">
  <li class="active"><a href="._learningcpp-bs000.html">1</a></li>
  <li><a href="._learningcpp-bs001.html">2</a></li>
  <li><a href="._learningcpp-bs001.html">&raquo;</a></li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


<center style="font-size:80%">
<!-- copyright --> &copy; 1999-2017, Morten Hjorth-Jensen. Released under CC Attribution-NonCommercial 4.0 license
</center>


</body>
</html>
    

